@model WebAppForMED.Models.DoctorFreeTimeViewModel
      
    <br /> <br />
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    <div class="container">
        <div class="form-group">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            
            @Html.Hidden("PatientId", (int)ViewBag.PatientId)
            @if (ViewBag.Doctors != null)
            {
                @Html.DisplayNameFor(model => model.DoctorId)
                @Html.DropDownListFor(model => model.DoctorId, (SelectList)ViewBag.Doctors, "Выбор врача", new { @class = "form-control" })
                @Html.ValidationMessageFor(model => model.DoctorId, "", new { @class = "text-danger" })
            }
        </div>
        <div class="form-group">
               @Html.DisplayNameFor(model => model.FreeTimeId)
                @Html.DropDownListFor(model => model.FreeTimeId, new SelectList(" "), "Выбор времени", new { @class = "form-control" })
                 @Html.ValidationMessageFor(model => model.FreeTimeId, "", new { @class = "text-danger" })
        </div>
    </div>
<!-- -->
    <script src="~/Scripts/jquery-1.10.2.min.js"></script>

    <script>
        $(document).ready(function () {
            $("#DoctorId").change(function () {
                $.get("/Patients/GetTime", { Id: $("#DoctorId").val() }, function (data) {
                    $("#FreeTimeId").empty();
                    $.each(data, function (index, row) {
                        $("#FreeTimeId").append("<option value='" + row.Value + "'>" + row.Text + "</option>")
                    })
                })
            })
        });
    </script>

<div class="form-group">
    <div class="col-md-offset-2 col-md-10">
        <input type="submit" value="Сохранить" class="btn btn-default" />
    </div>
</div>
}
<div>
    @Html.ActionLink("Назад к списку", "Index")
</div>
